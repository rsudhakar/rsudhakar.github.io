<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Sudhakar's Blog</title>
    <meta name="viewport" content="width=device-width">
    <link rel="icon" href="/images/favicon.ico" type="image/x-icon" />

    <link rel="stylesheet" href="/main.css">

    <meta property="og:type" content="website">
    <meta property="og:title" content="Sudhakar Rayavaram" />
    <meta property="og:site_name" content="Sudhakar's Blog">
    <meta property="og:description" content="Encoding MPEG-4 videos for S40 devices" />
    <meta property="og:image" content="https://sudhakar.dev/images/sudhakar.png" />
    <meta property="og:image:width" content="200">
    <meta property="og:image:height" content="200">
    <meta property="og:url" content="https://sudhakar.dev">
    <meta property="og:locale" content="en_US">
    <meta name="twitter:creator" content="@suDocker">

    <script src="/scripts/jquery-1.10.2.js"></script>
    <script src="/scripts/underscore-min.js"></script>
    <script src="/scripts/squiggly.js"></script>
    <script src="/scripts/default.js"></script>
</head>

<body class="">

    <div class="side-panel">
    <div class="matter">
        <div class="control" onclick="SidePanel.toggle()">
            <i class="icon-left-circle"></i>
        </div>
        <div class="name">
            <span class="first">Sudhakar</span>
            <span class="last">Rayavaram</span>        
        </div>
        <div class="details">
            <div class="icons">
                <a href="https://www.linkedin.com/in/sudhakar82" target="_blank"><img src="/images/linkedin-logo.png"/></a>
                <a href="https://twitter.com/SudhakarRay" target="_blank"><img src="/images/twitter-logo.png"/></a>
                <a href="https://stackoverflow.com/users/87918" target="_blank"><img src="/images/so-logo.png"/></a>
                <a href="https://github.com/rsudhakar" target="_blank"><img src="/images/github-logo.png"/></a>
                <a href="mailto:sudhakar82+online@gmail.com" target="_blank"><img src="/images/mail-logo.png"/></a>
            </div>
            <div class="highlt">
                <div>Problem solver<i> (And maker)</i>, </div>
                <div>Inquisitive<i> (Root to most of my problems)</i>, </div>
                <div>Software craftsman <i>(Don't ask for estimates)</i></div>
            </div>
            <p>Works at <a href="https://tarkalabs.com/" target="_blank">TarkaLabs</a></p>
            <p>Tech guy behind <a href="https://sportindia.in" target="_blank">SportIndia.in</a></p>
        </div>
    </div>
</div>  

    <div class="post-container">
    <div class="content">
        <div class="post_heading">
            <div class="title_section">Encoding MPEG-4 videos for S40 devices</div>
            <div class="date">30 Dec 2013</div>
        </div>
        <div class="post">
            <p>You bought a brand new phone with <a href="http://www.developer.nokia.com/Develop/Series_40/Platform/">S40 OS</a>
and it promised all things like video playback for a dozen of formats like 3GPP formats (H.263), H.264/AVC, MPEG-4, WMV, ABC, blah blah…. great!
So, you copy an MPEG-4 format video file and play it… Wham! “Video Not Supported”… What the… Your shiny new phone doesn’t look that shiny anymore right?</p>

<p>You are not alone!
At least you have my company… MPEG-4/H.264 encoding is a bit complicated format with so many variations because of its different
<a href="http://en.wikipedia.org/wiki/H.264#Profiles">profiles &amp; levels</a>. </p>

<p>Unfortunately many entry and mid segment devices (Example: Nokia Asha series phones) does not add support for all the variants…</p>

<p>So are we left to rot with our S40 phones without videos?
No! Definitely not!
So, we wear our explorer gear and stop not till we find the solution… searching… searching… resting….
searching…. scratching head…. searching… aaaahhhh…. here it is….  
<a href="http://handbrake.fr/">Handbrake</a> our saviour… So lets go ahead and apply the hand brake to zip forward our hurdle… that was one weird statement!</p>

<p>Mac users, you have one more hurdle to pass.
<a href="http://handbrake.fr/downloads.php">Handbrake dmg version</a> for mac does not have controls to tweak the MPEG-4 to match S40,
So you should install <a href="http://handbrake.fr/downloads2.php">HandbrakeCLI (command line interface)</a></p>

<p><em>I am going to explain here the command I used for command line interface, I think GUI version for windows has provision to pass these parameters in advanced tab</em></p>

<p>Here are the things I did to get the videos work in <a href="http://www.developer.nokia.com/Devices/Device_specifications/Nokia_Asha_200/">Nokia Asha 200</a>
(Note this really cool site maintained by Nokia with complete specs for ALL its phones)</p>

<ol>
  <li>Install <a href="http://handbrake.fr/downloads2.php">HandbrakeCLI</a></li>
  <li>Open terminal and run the following command:</li>
</ol>

<figure class="highlight"><pre><code class="language-sh" data-lang="sh">HandBrakeCLI <span class="nt">-e</span> x264 <span class="nt">--x264-profile</span> baseline <span class="nt">-X</span> 176 <span class="nt">--keep-display-aspect</span> <span class="nt">-r</span> 15 <span class="nt">-q</span> 20 <span class="nt">-B</span> 64 <span class="nt">-i</span> input_file_path  <span class="nt">-o</span> output_file_path</code></pre></figure>

<p>Where,</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    -e x264                 -&gt; encoding format (x264 stands for MPEG-4)
    --x264-profile baseline -&gt; x264 profile (could also try 'main' profile)
    -X 176                  –&gt; Maximum width of the video (I chose 176px)
    –Keep-display-aspect    –&gt; Maintains the aspect ratio of the input video
    -r 15                   –&gt; frame rate (check your phone specs for supported video playback frame rate.
                            I chose 15 frames per second)
    -q 20                   –&gt; Video quality (0 to 51 where 0 is for high quality and 51 for lowest.
                            20 is standard definition)
    -B 64                   –&gt; Audio quality in bitrate (64 stands for 64kbps)
</code></pre></div></div>

<p>Play around with different values that suits your phone… Have fun!</p>


        </div>
    </div>
</div>

<script type="text/javascript">
    Post.init();
</script>

    
    <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-26664903-1', 'auto');
        ga('send', 'pageview');
    </script>
</body>

</html>
