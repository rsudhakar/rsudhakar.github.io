<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Sudhakar's Scribblings | Encoding MPEG-4 videos for S40 devices</title>
    <meta name="viewport" content="width=device-width">
    <link rel="icon" href="/images/favicon.ico" type="image/x-icon"/>

    <!-- syntax highlighting CSS -->
    <link rel="stylesheet" href="/css/syntax.css">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/global.css">
    <link rel="stylesheet" href="/css/default.css">
    <link rel="stylesheet" href="/css/post.css">

    <script src="/scripts/jquery-1.10.2.js"></script>
    <script src="/scripts/underscore-min.js"></script>
    <script src="/scripts/default.js"></script>
    <script src="/scripts/post.js"></script>
</head>
<body onload="init()">
<h1 class="title">Sudhakar's scribblings...</h1>

<div id="filter_dock">
    <div class="filter programming">
        <img src="/images/prog_icon.png" data-category="programming" data-enabled-src="/images/prog_icon.png"
             data-disabled-src="/images/prog_icon_gray.png"/>
    </div>
    <div class="filter visualization">
        <img src="/images/viz_icon.png" data-category="visualization" data-enabled-src="/images/viz_icon.png"
             data-disabled-src="/images/viz_icon_gray.png"/>
    </div>
    <div class="filter cartoon">
        <img src="/images/cartoon_icon.png" data-category="cartoon" data-enabled-src="/images/cartoon_icon.png"
             data-disabled-src="/images/cartoon_icon_gray.png"/>
    </div>
    <div class="filter social">
        <img src="/images/social_icon.png" data-category="social" data-enabled-src="/images/social_icon.png"
             data-disabled-src="/images/social_icon_gray.png"/>
    </div>
    <div class="filter diy">
        <img src="/images/diy_icon.png" data-category="diy" data-enabled-src="/images/diy_icon.png"
             data-disabled-src="/images/diy_icon_gray.png"/>
    </div>
</div>

<div id="papers_container">
    <div id="papers">
        
        <a class="paper programming" href="/programming/2013/12/30/encoding-mpeg4.html">
            <div class="icon programming"></div>
            <span class="title programming">Encoding MPEG-4 videos for S40 devices</span>
            <span class="excerpt">You bought a brand new phone with S40 OS
and it promised all things like video playback for a dozen of formats like 3GPP formats (H.263), H.264/AVC, MPEG-4, WMV, ABC, blah blah.... great!
So, you c...</span>
            <span class="post_date programming">30 Dec 2013</span>
        </a>
        
        <a class="paper social" href="/social/2013/12/15/tncma-kyc.html">
            <div class="icon social"></div>
            <span class="title social">TamilNadu CMA Hackathon</span>
            <span class="excerpt">TamilNadu Government conducted hackathon event in Anna University for all the software enthusiasts. Myself along with 4
other thoughtworkers participated and built an app prototype that eventually ...</span>
            <span class="post_date social">15 Dec 2013</span>
        </a>
        
        <a class="paper diy" href="/diy/2013/12/08/bed-fix.html">
            <div class="icon diy"></div>
            <span class="title diy">DIY - how to fix an ill designed bed</span>
            <span class="excerpt">How can a bed design be described as &quot;ill&quot;? If it makes you ill then we can very well say it is ill
</span>
            <span class="post_date diy">08 Dec 2013</span>
        </a>
        
        <a class="paper diy" href="/diy/2013/08/03/asmi-birthday-memory-game.html">
            <div class="icon diy"></div>
            <span class="title diy">DIY - Kids memory game</span>
            <span class="excerpt">For the first year birthday party of my kid, I wanted to do something of my own for the kids instead of only buying stuff from the store.
Ended up creating a simple card memory game)
</span>
            <span class="post_date diy">03 Aug 2013</span>
        </a>
        
        <a class="paper diy" href="/diy/2013/06/15/concrete-art.html">
            <div class="icon diy"></div>
            <span class="title diy">Concrete Art</span>
            <span class="excerpt">Ever tried concrete work? It was great fun playing with it under the sun!
</span>
            <span class="post_date diy">15 Jun 2013</span>
        </a>
        
        <a class="paper visualization" href="/visualization/2013/03/17/pairing-matrix.html">
            <div class="icon visualization"></div>
            <span class="title visualization">Pairing Matrix</span>
            <span class="excerpt">Visualize your team&#39;s pairing matrix using git logs (Ofcourse you should have recorded the pairs names in the git commit messages)
</span>
            <span class="post_date visualization">17 Mar 2013</span>
        </a>
        
        <a class="paper visualization" href="/visualization/2013/03/11/share-bar-with-a-twist.html">
            <div class="icon visualization"></div>
            <span class="title visualization">Share Bar With A Twist</span>
            <span class="excerpt">A simple sharebar that shows the share of different entities. Hover over the entities listed below the sharebar to see the animation in action!
</span>
            <span class="post_date visualization">11 Mar 2013</span>
        </a>
        
        <a class="paper visualization" href="/visualization/2011/10/11/wedding-invite.html">
            <div class="icon visualization"></div>
            <span class="title visualization">My wedding invitation</span>
            <span class="excerpt">I cordially invite you to attend my Wedding ceremony on 17 Oct in Tiruvannamalai
</span>
            <span class="post_date visualization">11 Oct 2011</span>
        </a>
        
        <a class="paper programming" href="/programming/2011/05/22/install-rsa-securid.html">
            <div class="icon programming"></div>
            <span class="title programming">Installing RSA SecurID key in iPhone</span>
            <span class="excerpt">Somethings in the world are not expected to work seamlessly and needs a blog post tutorial. Installing RSA SecureID key into your iPhone is one of them…
</span>
            <span class="post_date programming">22 May 2011</span>
        </a>
        
        <a class="paper social" href="/social/2011/01/26/indian-festivals.html">
            <div class="icon social"></div>
            <span class="title social">2011 Indian Festivals ics file</span>
            <span class="excerpt">Want to know all the possible Indian festivals of 2011?
</span>
            <span class="post_date social">26 Jan 2011</span>
        </a>
        
        <a class="paper social" href="/social/2011/01/09/social-connecting-router-wi5.html">
            <div class="icon social"></div>
            <span class="title social">Connecting your home wireless router with Wi5 n...</span>
            <span class="excerpt">As you might have heard [Zylog Wi5][2] is a wireless broadband service available in many Indian cities.
Even though it is wireless, they will install a small signal receiver (modem + router) in the...</span>
            <span class="post_date social">09 Jan 2011</span>
        </a>
        
        <a class="paper programming" href="/programming/2010/11/10/programming-eval-in-java.html">
            <div class="icon programming"></div>
            <span class="title programming">eval() in Java?</span>
            <span class="excerpt">Here is the question from my friend (ex-colleague):
</span>
            <span class="post_date programming">10 Nov 2010</span>
        </a>
        
        <a class="paper social" href="/social/2010/04/04/spot-fine.html">
            <div class="icon social"></div>
            <span class="title social">Spot fine!!!</span>
            <span class="excerpt">Next time you get caught for a traffic violation, use the below information to your advantage :)
</span>
            <span class="post_date social">04 Apr 2010</span>
        </a>
        
        <a class="paper social" href="/social/2009/11/25/airtel-wireless-usb.html">
            <div class="icon social"></div>
            <span class="title social">Airtel Wireless USB with Mac OSX</span>
            <span class="excerpt">Even though Airtel website does not mention that Huawei Edge wireless usb modem plays well with Mac, it does!
Well that is a great news for all the mac users in India… The only things that needs to...</span>
            <span class="post_date social">25 Nov 2009</span>
        </a>
        
        <a class="paper programming" href="/programming/2008/11/02/is-it-a-rectangle.html">
            <div class="icon programming"></div>
            <span class="title programming">Is it a rectangle?</span>
            <span class="excerpt">Couple of days back when I was travelling back to home from office, I overheard two fellow employees discussing over a programming problem…
“If four points in a 2D plane (x,y) is given, how to find...</span>
            <span class="post_date programming">02 Nov 2008</span>
        </a>
        
        <a class="paper programming" href="/programming/2008/09/02/first-iphone-app.html">
            <div class="icon programming"></div>
            <span class="title programming">My first iPhone app</span>
            <span class="excerpt">Well well…. It is really a great experience to soak my feet in iPhone programming…
But, after 3 hours of playing with Objective-C and Cocoa, I was able to get some very simple and completely useles...</span>
            <span class="post_date programming">02 Sep 2008</span>
        </a>
        
        <a class="paper programming" href="/programming/2008/03/30/html-progress-bar.html">
            <div class="icon programming"></div>
            <span class="title programming">Progress bar in HTML</span>
            <span class="excerpt">When I was creating a simple google widget for our office coffee club, I thought of showing current inventory status with a progress bar.
To my surprise, I was not able to google any simple html/ja...</span>
            <span class="post_date programming">30 Mar 2008</span>
        </a>
        
        <a class="paper programming" href="/programming/2008/03/13/upgrade-iphone.html">
            <div class="icon programming"></div>
            <span class="title programming">Steps to upgrade iPhone to version 1.1.4</span>
            <span class="excerpt">Ok, you got an iPhone when it was in version 1.1.1 and, when there was a possibility of unlocking it, you did it… But,
Apple did not stop there… they kept adding more features to it and dammit, you...</span>
            <span class="post_date programming">13 Mar 2008</span>
        </a>
        
        <a class="paper cartoon" href="/cartoon/2008/01/01/assassins-creed.html">
            <div class="icon cartoon"></div>
            <span class="title cartoon">Assassins Creed???</span>
            <span class="excerpt">If you are as game crazy as me, the Title of this post explains the wallpaper’s theme. If not, google is your friend here.
The question marks in the title is for a reason. Just look at the wallpape...</span>
            <span class="post_date cartoon">01 Jan 2008</span>
        </a>
        
        <a class="paper cartoon" href="/cartoon/2007/12/13/vinayaka-iphone-wallpaper.html">
            <div class="icon cartoon"></div>
            <span class="title cartoon">Vinayaka Iphone Wallpaper</span>
            <span class="excerpt">This time it is Vinayaka… Saw this picture in the web and looked like a right candidate for my iPhone.
Can also be used with iPod Touch.
</span>
            <span class="post_date cartoon">13 Dec 2007</span>
        </a>
        
        <a class="paper cartoon" href="/cartoon/2007/11/15/hare-krishna-iphone-wallpaper.html">
            <div class="icon cartoon"></div>
            <span class="title cartoon">Hare Krishna Iphone Wallpaper</span>
            <span class="excerpt">A week after getting an iPhone, pre loaded goodies looks boring… So, I started to customize it with the most easiest part… wallpaper…
I got this picture from my friend Venky. Color balanced the ori...</span>
            <span class="post_date cartoon">15 Nov 2007</span>
        </a>
        
        <a class="paper programming" href="/programming/2007/10/31/enable-java-apps-browser.html">
            <div class="icon programming"></div>
            <span class="title programming">Enable java apps browser in T-Mobile SDA phone</span>
            <span class="excerpt">If you are having a T-Mobile SDA (in USA) / HTC Tornado (outside world) and installed a java application say a game,
you cannot browse to it because the java apps browser is not shown in the start ...</span>
            <span class="post_date programming">31 Oct 2007</span>
        </a>
        
        <a class="paper social" href="/social/2007/09/06/bommarillu-homescreen.html">
            <div class="icon social"></div>
            <span class="title social">Bommarillu home screen for windows smartphone</span>
            <span class="excerpt">This home screen is based on a Telugu movie “Bommarillu”. You can identify the background very easily if you have seen the movie countless times like i did :)
</span>
            <span class="post_date social">06 Sep 2007</span>
        </a>
        
        <a class="paper social" href="/social/2007/09/02/vinayaka-homescreen.html">
            <div class="icon social"></div>
            <span class="title social">Vinayaka home screen for windows smartphone</span>
            <span class="excerpt">Ah!… Atlast the day has come… The day I could share the home screen I created for my windows mobile phone…
Have a look at the screenshot below and feel free to use it in your windows mobile phones ...</span>
            <span class="post_date social">02 Sep 2007</span>
        </a>
        
        <a class="paper social" href="/social/2007/09/02/south-park-homescreen.html">
            <div class="icon social"></div>
            <span class="title social">Southpark home screen for windows smartphone</span>
            <span class="excerpt">Here comes another one… It took less than an hour to do the ‘not so interesting’ xml coding part… The image is pretty awesome like the series ;)
</span>
            <span class="post_date social">02 Sep 2007</span>
        </a>
        
        <a class="paper social" href="/social/2007/09/01/windows-home-screen.html">
            <div class="icon social"></div>
            <span class="title social">Installing windows mobile home screen</span>
            <span class="excerpt">All the windows mobile home screens you download from this blog will be a .zip file containing an .xml file with one or more images.
You can follow the below instructions for installing them in you...</span>
            <span class="post_date social">01 Sep 2007</span>
        </a>
        
    </div>
</div>

<div id="post_backdrop">
    <div id="post_container">
        <div class="left"></div>
        <div class="content">
            <div class="post_heading">
                <div class="calendar">
                    <div class="icon programming"></div>
                    <span class="day">30</span>
                    <span class="month_year">Dec 2013</span>
                </div>
                <div class="title_section">
                    <span class="programming">Encoding MPEG-4 videos for S40 devices</span>
                </div>
            </div>

            <div class="post">
                <p>You bought a brand new phone with <a href="http://www.developer.nokia.com/Develop/Series_40/Platform/">S40 OS</a>
and it promised all things like video playback for a dozen of formats like 3GPP formats (H.263), H.264/AVC, MPEG-4, WMV, ABC, blah blah.... great!
So, you copy an MPEG-4 format video file and play it... Wham! &quot;Video Not Supported&quot;... What the... Your shiny new phone doesn&#39;t look that shiny anymore right?</p>

<p>You are not alone!
At least you have my company... MPEG-4/H.264 encoding is a bit complicated format with so many variations because of its different
<a href="http://en.wikipedia.org/wiki/H.264#Profiles">profiles &amp; levels</a>. </p>

<p>Unfortunately many entry and mid segment devices (Example: Nokia Asha series phones) does not add support for all the variants...</p>

<p>So are we left to rot with our S40 phones without videos?
No! Definitely not!
So, we wear our explorer gear and stop not till we find the solution... searching... searching... resting....
searching.... scratching head.... searching... aaaahhhh.... here it is....  
<a href="http://handbrake.fr/">Handbrake</a> our saviour... So lets go ahead and apply the hand brake to zip forward our hurdle... that was one weird statement!</p>

<p>Mac users, you have one more hurdle to pass.
<a href="http://handbrake.fr/downloads.php">Handbrake dmg version</a> for mac does not have controls to tweak the MPEG-4 to match S40,
So you should install <a href="http://handbrake.fr/downloads2.php">HandbrakeCLI (command line interface)</a></p>

<p><em>I am going to explain here the command I used for command line interface, I think GUI version for windows has provision to pass these parameters in advanced tab</em></p>

<p>Here are the things I did to get the videos work in <a href="http://www.developer.nokia.com/Devices/Device_specifications/Nokia_Asha_200/">Nokia Asha 200</a>
(Note this really cool site maintained by Nokia with complete specs for ALL its phones)</p>

<ol>
<li>Install <a href="http://handbrake.fr/downloads2.php">HandbrakeCLI</a></li>
<li><p>Open terminal and run the following command:</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">HandBrakeCLI -e x264 --x264-profile baseline -X 176 --keep-display-aspect -r 15 -q 20 -B 64 -i input_file_path  -o output_file_path
</code></pre></div>
<p>Where,</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">    -e x264                 -&gt; encoding format (x264 stands for MPEG-4)
    --x264-profile baseline -&gt; x264 profile (could also try &#39;main&#39; profile)
    -X 176                  –&gt; Maximum width of the video (I chose 176px)
    –Keep-display-aspect    –&gt; Maintains the aspect ratio of the input video
    -r 15                   –&gt; frame rate (check your phone specs for supported video playback frame rate.
                               I chose 15 frames per second)
    -q 20                   –&gt; Video quality (0 to 51 where 0 is for high quality and 51 for lowest.
                               20 is standard definition)
    -B 64                   –&gt; Audio quality in bitrate (64 stands for 64kbps)
</code></pre></div></li>
</ol>

<p>Play around with different values that suits your phone… Have fun!</p>

            </div>
        </div>
        <div class="right"></div>
    </div>
</div>


<script>
    (function (i, s, o, g, r, a, m) {
        i['GoogleAnalyticsObject'] = r;
        i[r] = i[r] || function () {
            (i[r].q = i[r].q || []).push(arguments)
        }, i[r].l = 1 * new Date();
        a = s.createElement(o),
                m = s.getElementsByTagName(o)[0];
        a.async = 1;
        a.src = g;
        m.parentNode.insertBefore(a, m)
    })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

    ga('create', 'UA-26664903-1', 'rsudhakar.in');
    ga('send', 'pageview');
</script>
</body>
</html>
