<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Sudhakar's Blog</title>
    <meta name="viewport" content="width=device-width">
    <link rel="icon" href="/images/favicon.ico" type="image/x-icon" />

    <link rel="stylesheet" href="/main.css">
    <script src="/scripts/post.js"></script>
</head>

<body>
    <div class="home">
        <a class="icon-left-circle" onclick="homeHandler('programming')">Sudhakar Rayavaram</a>
    </div>
    <div id="post_backdrop">
        <div id="post_container">
            <div class="content">
                <div class="post_heading">
                    <div class="date">30 Dec 2013</div>
                    <div class="title_section">Encoding MPEG-4 videos for S40 devices</div>
                </div>
                <div class="post">
                    <p>You bought a brand new phone with <a href="http://www.developer.nokia.com/Develop/Series_40/Platform/">S40 OS</a>
and it promised all things like video playback for a dozen of formats like 3GPP formats (H.263), H.264/AVC, MPEG-4, WMV, ABC, blah blah.... great!
So, you copy an MPEG-4 format video file and play it... Wham! &quot;Video Not Supported&quot;... What the... Your shiny new phone doesn&#39;t look that shiny anymore right?</p>

<p>You are not alone!
At least you have my company... MPEG-4/H.264 encoding is a bit complicated format with so many variations because of its different
<a href="http://en.wikipedia.org/wiki/H.264#Profiles">profiles &amp; levels</a>. </p>

<p>Unfortunately many entry and mid segment devices (Example: Nokia Asha series phones) does not add support for all the variants...</p>

<p>So are we left to rot with our S40 phones without videos?
No! Definitely not!
So, we wear our explorer gear and stop not till we find the solution... searching... searching... resting....
searching.... scratching head.... searching... aaaahhhh.... here it is....  
<a href="http://handbrake.fr/">Handbrake</a> our saviour... So lets go ahead and apply the hand brake to zip forward our hurdle... that was one weird statement!</p>

<p>Mac users, you have one more hurdle to pass.
<a href="http://handbrake.fr/downloads.php">Handbrake dmg version</a> for mac does not have controls to tweak the MPEG-4 to match S40,
So you should install <a href="http://handbrake.fr/downloads2.php">HandbrakeCLI (command line interface)</a></p>

<p><em>I am going to explain here the command I used for command line interface, I think GUI version for windows has provision to pass these parameters in advanced tab</em></p>

<p>Here are the things I did to get the videos work in <a href="http://www.developer.nokia.com/Devices/Device_specifications/Nokia_Asha_200/">Nokia Asha 200</a>
(Note this really cool site maintained by Nokia with complete specs for ALL its phones)</p>

<ol>
<li>Install <a href="http://handbrake.fr/downloads2.php">HandbrakeCLI</a></li>
<li><p>Open terminal and run the following command:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">HandBrakeCLI -e x264 --x264-profile baseline -X 176 --keep-display-aspect -r 15 -q 20 -B 64 -i input_file_path  -o output_file_path
</code></pre></div>
<p>Where,</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">    -e x264                 -&gt; encoding format (x264 stands for MPEG-4)
    --x264-profile baseline -&gt; x264 profile (could also try &#39;main&#39; profile)
    -X 176                  –&gt; Maximum width of the video (I chose 176px)
    –Keep-display-aspect    –&gt; Maintains the aspect ratio of the input video
    -r 15                   –&gt; frame rate (check your phone specs for supported video playback frame rate.
                               I chose 15 frames per second)
    -q 20                   –&gt; Video quality (0 to 51 where 0 is for high quality and 51 for lowest.
                               20 is standard definition)
    -B 64                   –&gt; Audio quality in bitrate (64 stands for 64kbps)
</code></pre></div></li>
</ol>

<p>Play around with different values that suits your phone… Have fun!</p>

                </div>
            </div>
        </div>
    </div>
</body>
</html>